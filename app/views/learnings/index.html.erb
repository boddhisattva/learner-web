<section class="section">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-10">
        <div class="content">
          <!-- Modified header for better mobile layout -->
          <div class="mb-4">
            <h1 class="title has-text-centered is-flex is-flex-wrap-wrap is-justify-content-center is-align-items-center mb-2">
              <span class="mr-2">Learning Lessons</span>
              <small class="has-text-grey">(<%= @learnings.count %> total)</small>
            </h1>
            <div class="has-text-centered">
              <%= link_to new_learning_path, class: "button is-primary" do %>
                <span class="icon">
                  <i class="fas fa-plus"></i>
                </span>
                <span>New Learning</span>
              <% end %>
            </div>
          </div>

          <% if @learnings.any? %>
            <div class="box">
              <div class="table-container"> <!-- Added wrapper for horizontal scrolling -->
                <table class="table is-fullwidth is-hoverable">
                  <thead>
                    <tr>
                      <th>Title</th>
                      <th class="is-hidden-mobile">Lesson</th> <!-- Hide on mobile -->
                      <th class="is-hidden-mobile">Created</th> <!-- Hide on mobile -->
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    <% @learnings.each do |learning| %>
                      <tr>
                        <td>
                          <%= learning.lesson %>
                          <!-- Show these details on mobile only -->
                          <div class="is-hidden-tablet">
                            <small class="has-text-grey">
                              <%= learning.created_at.strftime("%B %d, %Y") %>
                            </small>
                          </div>
                        </td>
                        <td class="is-hidden-mobile"></td>
                        <td class="is-hidden-mobile">
                          <%= learning.created_at.strftime("%B %d, %Y") %>
                        </td>
                        <td>
                          <div class="buttons are-small is-flex-wrap-nowrap">
                            <%= link_to learning_path(learning),
                                class: "button is-info is-small" do %>
                              <span class="icon is-small">
                                <i class="fas fa-eye"></i>
                              </span>
                            <% end %>
                            <%= link_to edit_learning_path(learning),
                                class: "button is-warning is-small" do %>
                              <span class="icon is-small">
                                <i class="fas fa-edit"></i>
                              </span>
                            <% end %>
                            <%= link_to learning_path(learning),
                                method: :delete,
                                data: { confirm: "Are you sure you want to delete this learning?" },
                                class: "button is-danger is-small" do %>
                              <span class="icon is-small">
                                <i class="fas fa-trash"></i>
                              </span>
                            <% end %>
                          </div>
                        </td>
                      </tr>
                    <% end %>
                  </tbody>
                </table>
              </div>
            </div>

            <% if @learnings.respond_to?(:total_pages) %>
              <nav class="pagination is-centered" role="navigation" aria-label="pagination">
                <%= paginate @learnings %>
              </nav>
            <% end %>
          <% else %>
            <div class="notification is-info is-light">
              <p class="has-text-centered">
                No learnings have been created yet.
                <%= link_to "Create your first learning", new_learning_path %>
              </p>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</section>
