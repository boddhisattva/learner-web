<section class="section">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-10">
        <div class="content">
          <!-- Modified header for better mobile layout -->
          <div class="mb-4">
            <h1 class="title has-text-centered is-flex is-flex-wrap-wrap is-justify-content-center is-align-items-center mb-2">
              <span class="mr-2">Learning Lessons</span>
              <small id="learnings_count" class="has-text-grey">(<%= @learnings.count %> total)</small>
            </h1>

            <!-- Search form -->
            <div class="box mb-4">
              <%= form_with(url: learnings_path, method: :get, local: true, class: "mb-3") do |f| %>
                <div class="field is-grouped">
                  <div class="control is-expanded">
                    <%= f.text_field :search,
                        class: "input",
                        placeholder: "Search by learning lesson...",
                        value: params[:search] %>
                  </div>

                  <div class="control">
                    <%= f.submit "Search", class: "button is-info" %>
                  </div>
                  <% if params[:search].present? || params[:category].present? %>
                    <div class="control">
                      <%= link_to "Clear", learnings_path, class: "button" %>
                    </div>
                  <% end %>
                </div>
              <% end %>
            </div>

            <div class="has-text-centered">
              <%= link_to new_learning_path, class: "button is-primary" do %>
                <span class="icon">
                  <i class="fas fa-plus"></i>
                </span>
                <span>New Learning</span>
              <% end %>
            </div>
          </div>

          <% if @learnings.any? %>
            <%= render 'learnings' %>
            <% if @learnings.respond_to?(:total_pages) %>
              <nav class="pagination is-centered" role="navigation" aria-label="pagination">
                <%= will_paginate @learnings %>
              </nav>
            <% end %>
          <% else %>
            <div class="notification is-info is-light">
              <p class="has-text-centered">
                No learnings have been created yet.
                <%= link_to "Create your first learning", new_learning_path %>
              </p>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</section>
